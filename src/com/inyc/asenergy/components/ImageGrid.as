package com.inyc.asenergy.components {	import com.inyc.asenergy.events.Events;	import com.inyc.asenergy.events.GenericDataEvent;	import com.inyc.asenergy.utils.LoaderUtils;	import com.inyc.asenergy.utils.debug.Logger;		import flash.display.DisplayObject;	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;		/**	 * @author stevewarren	 */	public class ImageGrid extends MovieClip {		private var _loaderUtils:LoaderUtils;		private var _gridMC:MovieClip;		//private var _scrollPane:ScrollPane;						public function ImageGrid(dataArray:Array, iGridItem:Class, cellWidth:int, cellHeight:int, gap:int, cols:int, maxHeight:int) {			log("CONSTRUCTOR maxHeight:"+maxHeight);			//log(dataArray);						_loaderUtils = new LoaderUtils();			_loaderUtils.addEventListener(Event.COMPLETE, receiveEvent);			_gridMC = _loaderUtils.loadGridItems(dataArray, iGridItem, cellWidth, cellHeight, gap, cols);			addChild(_gridMC);			//			_scrollPane = new ScrollPane();//			_scrollPane.width = (cellWidth + gap) * cols + (gap*2);//			_scrollPane.height = maxHeight;//			_scrollPane.source = _gridMC;//			//			addChild(_scrollPane);						addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);		}				private function onMouseEvent(e:MouseEvent) {			dispatchEvent(new GenericDataEvent(Events.IMAGE_GRID_CLICK, {index:e.target.name.split("_")[1], mouseEvent:e}));		}		private function receiveEvent(e:Event) {			//log("receiveEvent:"+e);			switch(e.type){				case Event.COMPLETE:					if (_loaderUtils && _loaderUtils.hasEventListener(Event.COMPLETE)){											}										//_scrollPane.source = _gridMC;				default:			}			dispatchEvent(e);		}				private function onRemovedFromStage(e:Event){			destroy();		}				public function destroy():void {			_loaderUtils.removeEventListener(Event.COMPLETE, receiveEvent);			log("destroy");									if(_loaderUtils){				_loaderUtils.destroy();			}			_loaderUtils = null;									if (_gridMC){				for (var i:int=0;i<_gridMC.numChildren;i++){					(_gridMC.getChildAt(i) as GridItem).destroy();				}				_gridMC.parent.removeChild(_gridMC);			}			_gridMC = null;						//			if(_scrollPane){//				_scrollPane.parent.removeChild(_scrollPane);//			}//			_scrollPane = null;		}				private function log(logItem:*):void {			Logger.log(logItem,["ImageGrid"],true);		}	}}