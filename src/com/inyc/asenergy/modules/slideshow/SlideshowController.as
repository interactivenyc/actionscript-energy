package com.inyc.asenergy.modules.slideshow {	import com.inyc.asenergy.modules.slideshow.loader.ISlideshowLoader;	import com.inyc.asenergy.modules.slideshow.view.IPhotoView;	import com.inyc.asenergy.modules.slideshow.view.nav.INavPanel;	import com.inyc.asenergy.utils.debug.Logger;		import flash.display.LoaderInfo;	import flash.display.MovieClip;		/**	 * @author stevewarren	 */	public class SlideshowController {		//test		protected var _rootLoader:ISlideshowLoader;		protected var _queryVars:Object;		protected var _mainXML:XML;				protected var _photoView:IPhotoView;		protected var _navPanel:INavPanel;		protected var _currentIndex:uint = 1;		protected var _stories:XMLList;		protected var _titles:MovieClip;						protected var _tweening:Boolean = false;				public var allowDebug:Boolean=true;		protected var DEBUGSTRING="fgdebug";				public function SlideshowController():void{			log("SlideshowController CONSTRUCTOR");					}						public function init(pLoader:ISlideshowLoader, pQueryVars:Object, pMainXML:XML):void{			log("init");			_rootLoader = pLoader;			_queryVars = pQueryVars;			_mainXML = pMainXML;						processXML();						log("init2");						_photoView = _rootLoader.getPhotoView();			_photoView.setController(this);						log("init3");						_navPanel = _rootLoader.getNavPanel();			_navPanel.setController(this);												initDebugging();						_photoView.loadImage(_currentIndex);								}				public function setPhotoIndex(index:uint):void{			log("setPhotoIndex()");						if (_photoView.imageLoading) return;									_currentIndex = index;			showTitles();			_photoView.loadImage(index);			(_navPanel as MovieClip).gotoAndStop(index);		}								protected function showTitles(){			log("showTitles()");			//override for custom implementation		}								protected function removeTitles(){			log("showTitles()");			//override for custom implementation		}								protected function processXML(){			log("testXML");			_stories = _mainXML.stories.story;			log("stories.length():"+stories.length());		}				protected function initDebugging(){			log("initDebugging");						var loaderInfo:LoaderInfo = _rootLoader.getTimeline().loaderInfo;			if(loaderInfo.url.indexOf("file:") > -1) {				log("running local");				return;			}						allowDebug=false;			if (_queryVars.debug && _queryVars.debug == DEBUGSTRING) {				allowDebug=true;			}			log("initDebugging allowDebug:"+allowDebug);		}				public function get stories():XMLList{			return _stories;		}				public function get tweening():Boolean{			return _photoView.imageLoading;		}				public function get currentIndex():uint{			return _currentIndex;		}				public function get imageLoading():Boolean{			return _photoView.imageLoading;		}								protected function log(logItem:*,category:Array=null):void{			if (!allowDebug) return;			if(category==null) category = ["SlideshowController"];			Logger.log(logItem,category,true);		}			}	}internal class SingletonEnforcer{}