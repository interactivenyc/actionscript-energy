package com.inyc.asenergy.modules {	import com.inyc.asenergy.core.CoreMovieClip;			import flash.text.TextField;			import flash.events.Event;	import flash.display.MovieClip;	import flash.geom.Point;			/**	 * @author stevewarren -- smells like Sam Kang in here	 */	public class Module extends CoreMovieClip {		protected var _data:Object;				public var titleText:TextField;		public var dataText:TextField;		public function Module(data:Object,fw:int=960, fh:int=680, gr:int=3, gc:int=8) {			super();			_data = data;			//if (dataText != null){//				dataText.text = data.attributes[0];//			}						fieldwidth = fw;			fieldheight = fh;			gridrow = gr;			gridcol = gc;			_fw = fieldwidth / gridcol;			_fh = fieldheight / gridrow;						pupdate();		}												//temp pbox code for room item		public var tl:MovieClip;		public var t:MovieClip;		public var tr:MovieClip;		public var r:MovieClip;		public var l:MovieClip;		public var bl:MovieClip;		public var b:MovieClip;		public var br:MovieClip;				public var gridrow:int = 3;		public var gridcol:int = 8;		public var fieldwidth:int;		public var fieldheight:int;		private var _fw:Number;		private var _fh:Number;		//private var thispoint:Point = new Point();		private var piecepoint:Point = new Point();						private function pupdate(e:Event = null){						if(tl!= null){					tl.gotoAndStop(getposition(tl.x,tl.y));				t.gotoAndStop(getposition(t.x,t.y));				tr.gotoAndStop(getposition(tr.x,tr.y));				l.gotoAndStop(getposition(l.x,l.y));				r.gotoAndStop(getposition(r.x,r.y));				bl.gotoAndStop(getposition(bl.x,bl.y));				b.gotoAndStop(getposition(b.x,b.y));				br.gotoAndStop(getposition(br.x,br.y));			}					}		//returns the framenumber for the piece				override public function set x(_x:Number):void {			super.x = _x;			pupdate();		}		override public function set y(_y:Number):void {			super.y = _y;			pupdate();		}				private var tempint:int;		private var tempint2:int;				private function getposition(posx:Number,posy:Number):int{			//trace(this.localToGlobal(new Point(0,0)));						piecepoint.x = posx;			piecepoint.y = posy;			piecepoint = this.localToGlobal(piecepoint);			tempint = Math.ceil(piecepoint.x / _fw);			if(tempint < 1)tempint=1;			else if(tempint > gridcol)tempint = gridcol;									tempint2 = Math.floor((piecepoint.y) / _fh); 			if(tempint2 < 0)tempint2=0;			else if(tempint2 >= gridrow)tempint2 = gridrow-1;						tempint += gridcol * tempint2;						return tempint;								}				public function startRemove(){			//override this in the module if needed		}						override protected function onRemovedFromStage(e:Event):void {			super.onRemovedFromStage(e);		}	}}